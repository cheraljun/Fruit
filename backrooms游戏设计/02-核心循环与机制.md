# 02-核心循环与机制

> **从探索到生存：Backrooms的玩法机制详解**

---

## 游戏循环总览

### 三层循环结构

```
┌─────────────────────────────────────────────────────────┐
│ 长期循环（Meta Loop）- 2-3小时                            │
│                                                         │
│  Level 0 → Level 1 → Level 4 → 探索网络 → 达成结局        │
│     ↑                                            ↓      │
│     └──────────── 重玩追求不同结局 ──────────────┘      │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 中期循环（Core Loop）- 15-30分钟                          │
│                                                         │
│  探索Level → 遭遇事件 → 消耗资源 → 收集补给 → 返回安全区  │
│     ↑                                            ↓      │
│     └──────────── 恢复后再次出发 ───────────────┘      │
└─────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────┐
│ 短期循环（Moment Loop）- 1-3分钟                          │
│                                                         │
│  进入节点 → 阅读场景 → 做出选择 → 触发结果 → 下一节点     │
│     ↑                                            ↓      │
│     └──────────── 持续探索当前区域 ──────────────┘      │
└─────────────────────────────────────────────────────────┘
```

---

## 核心机制1: 三大属性系统

### 理智值（Sanity）

#### 数值范围与阶段
```yaml
理智值范围: 0-100

阶段划分:
  100-70: 🟢 正常状态
    - 思维清晰
    - 选项全部可见
    - 文本描写正常

  69-40: 🟡 轻度焦虑
    - 轻微幻听
    - 文本开始出现主观色彩
    - "那个声音...是幻觉吗？"

  39-20: 🟠 中度不安
    - 严重幻觉
    - 某些选项被"幻觉选项"替代
    - "墙纸在蠕动...不,冷静..."

  19-5: 🔴 重度崩溃
    - 无法区分现实与幻觉
    - 危险选项看起来安全
    - "他们在笑我...都在笑我..."

  4-0: ⚫ 精神崩溃
    - Game Over
    - "你失去了自我"
```

---

#### 理智消耗机制

##### 环境消耗（被动）
```javascript
每小时消耗:
  Level 0: -5理智
  Level 1: -3理智
  Level 2: -8理智
  Level 4: -1理智
  Level 5: -15理智
  Level 6: -20理智
  Level 11: -2理智
```

##### 事件消耗（主动触发）
```javascript
遭遇Smiler: -20理智
遭遇Hound: -10理智
遭遇The Beast: -50理智
被实体攻击: -15理智
目睹他人死亡: -30理智
穿过Drop Maze: -10理智
Noclip失败: -25理智
发现人类遗骸: -20理智
进入Level Fun: -30理智（识破陷阱后）
```

##### 孤独消耗（时间累积）
```javascript
独处时间:
  1-3天: 无影响
  4-7天: -5理智/天
  8-14天: -10理智/天
  15+天: -15理智/天

（遇到其他幸存者或Blub Cat重置计数）
```

---

#### 理智恢复机制

```yaml
恢复方式:

物品:
  杏仁水: +20理智（主要手段）
  遇到Blub Cat: +10理智
  找到其他人类: +15理智
  成功逃离危险: +5理智

环境（每小时）:
  Level 4休息: +10理智
  Level 11定居: +8理智
  睡眠（安全区）: +15理智
  书写日记: +3理智
  规律活动: +2理智
```

---

#### 理智影响玩法

##### 低理智的游戏表现

**理智 < 40: 幻听与幻觉**
```
正常文本:
"走廊尽头什么都没有。"

低理智文本:
"走廊尽头...有什么在动？
不，那只是影子。
或者...不是？"
```

**理智 < 20: 选项扭曲**
```
正常选项:
1. 前往Level 4（安全）
2. 继续探索Level 2（危险）
3. 使用杏仁水恢复

低理智选项:
1. 前往Level 4（但你看到的文字是"跳入虚空"）
2. 继续探索（看起来是"找到出口"）
3. 使用杏仁水（看起来是"喝下墙上的液体"）

→ 玩家必须凭记忆和直觉判断
```

**理智 < 10: 强制幻觉事件**
```
触发随机幻觉遭遇:
  - 看到不存在的Smiler
  - 听到妈妈的声音（是Bone Thief）
  - 看到"出口"标志（其实是Level Fun入口）
  - 浪费杏仁水对抗幻觉
```

---

### 生命值（Health）

#### 数值范围与状态
```yaml
生命值范围: 0-100

状态:
  100-80: 🟢 健康
    - 无负面效果

  79-50: 🟡 轻伤
    - 移动速度-10%
    - 文本提示疼痛

  49-20: 🟠 重伤
    - 移动速度-30%
    - 理智每小时-10（疼痛导致）
    - 某些选项不可用（需要体力的动作）

  19-1: 🔴 濒死
    - 视野模糊（文本描写变化）
    - 理智每小时-20
    - 大部分动作选项消失

  0: ⚫ 死亡
    - Game Over
```

---

#### 生命消耗

##### 实体攻击
```javascript
Smiler: 0生命（纯理智攻击）
Hound: -30生命
Partygoer: -50生命
Bone Thief: -100生命（即死）
Burster: -40生命
The Beast: -60生命
Deathmoth: -25生命
```

##### 环境伤害
```javascript
Noclip失败（卡墙）: -20到-50生命
Drop Maze坠落（传送成功）: -10生命
Drop Maze坠落（高空）: -100生命（即死）
Level 2的蒸汽: -5/分钟
Level 7的冰水: -10/分钟
饥饿（3天未进食）: -10/天
脱水（2天未喝水）: -15/天
```

##### 持续伤害
```javascript
流血效果（被Hound攻击后）:
  -5生命/分钟
  需要物资包包扎止血

中毒（被Burster酸液）:
  -5生命/分钟
  需要清洗或等待3分钟自然止痛
```

---

#### 生命恢复

```yaml
恢复方式:

物品:
  物资包: +15生命（主要手段）
  杏仁水: +5生命（轻微治疗）

环境（每小时）:
  休息（安全区）: +5生命
  Level 4长期休息: +10生命
  睡眠: +15生命

特殊:
  影子丢失状态（被Yellow Hound攻击）:
    - 所有治疗无效
    - 持续3天后恢复
```

---

### 体力值（Stamina）

#### 数值范围与状态
```yaml
体力值范围: 0-100

状态:
  100-60: 🟢 充沛
    - 所有动作可用

  59-30: 🟡 疲惫
    - 奔跑距离减半
    - Noclip成功率-10%

  29-10: 🟠 exhausted
    - 无法奔跑
    - 跳跃失败率+50%

  9-0: 🔴 力竭
    - 只能行走
    - 无法跳跃
    - Noclip成功率-30%
    - 逃跑判定几乎必败
```

---

#### 体力消耗

```javascript
活动消耗:
  奔跑: -5/分钟
  跳过Drop Maze: -20
  攀爬: -15
  战斗/挣扎: -25
  Noclip尝试: -10
  搬运重物: -8/分钟

环境额外消耗:
  Level 2高温: -3/分钟
  Level 7冰水: -5/分钟
  Level 8狭窄空间（爬行）: -8/分钟
```

---

#### 体力恢复

```yaml
恢复方式:

物品:
  物资包: +25体力
  杏仁水: +10体力

活动（每10分钟）:
  休息（坐下）: +10体力
  睡眠（每小时）: +50体力

理智影响恢复速度:
  理智100-70: 恢复速度100%
  理智69-40: 恢复速度75%
  理智39-20: 恢复速度50%
  理智<20: 恢复速度25%
```

---

### 三大属性的交互关系

```
┌─────────────────────────────────────────────┐
│                 理智值                       │
│                   ↓                         │
│        影响体力恢复速度                       │
│                   ↓                         │
│                 体力值                       │
│                   ↓                         │
│         影响逃跑成功率                        │
│                   ↓                         │
│                 生命值                       │
│                   ↓                         │
│       极低时影响理智                          │
│                   ↓                         │
│              恶性循环                         │
└─────────────────────────────────────────────┘
```

#### 恶性循环示例
```
受伤（生命-30）
    ↓
理智下降（疼痛，-15理智）
    ↓
体力恢复变慢（恢复速度50%）
    ↓
下次遭遇实体时体力不足
    ↓
逃跑失败
    ↓
再次受伤（生命-30）
    ↓
循环加速...
```

---

## 核心机制2: 资源管理系统

### 杏仁水（Almond Water）

#### 基础数据
```yaml
名称: 杏仁水
初始数量: 3瓶
最大携带: 99瓶
稀有度: ⭐⭐⭐⭐ （非常重要）

效果:
  理智: +20
  生命: +5
  体力: +10
  解渴: 满足

特殊用途:
  对Burster: 致命武器（泼洒）
```

---

#### 获取途径

```javascript
Level 0:
  随机搜索: 30%概率 +1瓶
  
Level 1:
  雾气区收集: 保证 +3瓶/次访问
  随机搜索: 40%概率 +1瓶
  
Level 4:
  茶水间饮水机: 无限供应 +1瓶/次
  （核心补给点）
  
Level 5:
  客房搜索: 15%概率 +1瓶
  宴会厅: 20%概率 +1瓶
  
Level 11:
  商店货架: 30%概率 +1瓶
  住宅区: 25%概率 +1瓶
```

---

#### 使用策略

```yaml
最佳使用时机:
  理智<40: 立即使用（防止幻觉）
  理智<30: 优先使用（进入危险区）
  理智>50: 暂不使用（节约资源）

紧急情况:
  理智<20 + 生命<30: 
    → 使用杏仁水恢复理智（优先）
    → 理智恢复后再用物资包治疗生命

战术用途:
  遭遇Burster:
    → 杏仁水作为武器（泼洒）
    → 消耗1瓶，秒杀Burster
```

---

### 物资包（Supplies）

#### 基础数据
```yaml
名称: 物资包
初始数量: 5份
最大携带: 50份
稀有度: ⭐⭐⭐ （重要）

效果:
  生命: +15
  体力: +25
  饥饿: +40
```

---

#### 获取途径

```javascript
Level 0:
  极少: 5%概率 +1份

Level 1:
  储物区: 保证 +1份/次
  随机搜索: 30%概率 +1份

Level 5:
  客房抽屉: 25%概率 +1份
  厨房: 30%概率 +1份

Level 9:
  房屋内: 35%概率 +1份

Level 11:
  商店: 40%概率 +1份
```

---

#### 使用策略

```yaml
最佳使用时机:
  生命<40: 建议使用
  生命<30: 优先使用
  体力<30: 可使用（如果需要逃跑）

资源分配:
  杏仁水 → 理智恢复
  物资包 → 生命恢复
  避免用杏仁水治疗生命（效率低）
```

---

### 手电筒与电池

#### 基础数据
```yaml
名称: 手电筒
初始: 1个（100%电量）
最大携带: 1个

电池消耗:
  Level 6（必需）: -5%/分钟
  黑暗区域: -2%/分钟
  不使用: 0%

特殊功能:
  驱散Smiler: -10%电量/次
  吸引Deathmoth: 负面效果
```

---

#### 电池获取

```javascript
Level 1:
  工具区: 25%概率 +50%电量

Level 5:
  客房: 30%概率 +50%电量

Level 13:
  充电站: 保证 +100%电量
```

---

#### 使用策略

```yaml
必需使用:
  Level 6: 完全黑暗，必须开启
  遭遇Smiler: 立即打开驱散

谨慎使用:
  Level 5: 可能吸引Deathmoth
  电量<20%: 节约使用，寻找补给
```

---

### 绳索（Rope）

#### 基础数据
```yaml
名称: 绳索
初始数量: 0根
最大携带: 3根
稀有度: ⭐⭐⭐⭐⭐ （极稀有）

用途:
  Drop Maze: 安全通过（100%成功）
  攀爬: 某些特殊区域
  一次性消耗
```

---

#### 获取途径

```javascript
Level 1:
  工具区: 10%概率 +1根

Level 5:
  地下室（危险）: 30%概率 +1根

随机:
  稀有搜索: 5%概率
```

---

#### 使用策略

```yaml
最佳用途:
  Drop Maze: 如果有绳索，100%安全通过
  高价值区域: Level 5地下室探索

是否值得?
  绳索稀有，优先用于关键时刻
  如果体力>40，可尝试跳跃（70%成功率）
  绳索留给体力不足时使用
```

---

## 核心机制3: Noclip系统

### Noclip等级

```yaml
等级范围: 0-10

等级0-2: 新手
  - 只能通过明显裂缝
  - 成功率: 20%
  - 失败: 卡在墙里（-20生命）

等级3-5: 学习者
  - 感知隐藏裂缝
  - 成功率: 50%
  - 失败: 随机传送

等级6-8: 熟练者
  - 主动尝试任意墙壁
  - 成功率: 75%
  - 失败: 轻伤（-10生命）

等级9-10: 大师
  - 随意穿越，精确选择层级
  - 成功率: 95%
  - 可进入隐藏层级
```

---

### Noclip提升

```javascript
经验获取:
  成功Noclip: +1经验
  被实体攻击触发本能: +1经验
  在后室生存30天: +2经验
  理智<10时空间感知增强: +1经验（高风险）

等级里程碑:
  0次 → Level 0
  3次 → Level 3
  8次 → Level 6
  15次 → Level 9
```

---

### Noclip机制

#### 判定流程

```javascript
玩家选择尝试Noclip:
  ↓
检查Noclip等级:
  ↓
生成随机数（1-100）:
  ↓
成功（随机数 ≤ 成功率）:
  ├─ 传送到目标层级
  ├─ Noclip等级+1经验
  └─ 体力-10
  ↓
失败（随机数 > 成功率）:
  ├─ Level 0-2: 卡在墙里（-20生命，-25理智）
  ├─ Level 3-5: 随机传送到未知层级
  ├─ Level 6-8: 轻微受伤（-10生命）
  └─ Level 9-10: 几乎不失败
```

---

#### Noclip点类型

```yaml
明显裂缝:
  - 墙壁有可见裂缝
  - Noclip成功率+20%
  - Level 0, 1, 2常见

隐藏裂缝:
  - 需要Noclip等级3+感知
  - 正常成功率
  - 可能通往隐藏层级

任意墙壁:
  - 需要Noclip等级6+
  - 成功率看等级
  - 可精确选择目标层级（等级9+）
```

---

### Noclip目标选择

```javascript
低等级（0-5）:
  随机传送（无法控制目的地）
  
中等级（6-8）:
  可选择相邻层级:
    - Level 0 → Level 1, 2
    - Level 1 → Level 0, 2, 4, 11
    
高等级（9-10）:
  可精确选择任意已知层级
  可进入隐藏层级（Level Fun需警惕）
```

---

## 核心机制4: 遭遇系统

### 遭遇类型

#### 实体遭遇
```yaml
频率: 每探索3-5个节点触发1次

遭遇流程:
  1. 进入节点
  2. 随机判定（概率表）
  3. 如果触发 → 实体遭遇场景
  4. 玩家选择应对方式
  5. 结果判定
```

---

#### 遭遇概率表

```javascript
Level 0遭遇表:
  Bone Thief: 15%
  Smiler: 40%
  Yellow Hound: 15%
  无遭遇: 30%

Level 1遭遇表:
  Hound: 35%
  Blub Cat: 20%（友善）
  Jerry: 5%
  无遭遇: 40%

Level 4遭遇表:
  无实体: 100%（绝对安全）

Level 5遭遇表:
  The Beast: 100%（逐渐接近）
  Deathmoth: 30%
  Smiler (Greater): 20%

Level Fun遭遇表:
  Partygoer: 100%（必定遭遇）
```

---

### 遭遇应对选项

#### Smiler遭遇
```yaml
场景:
  "黑暗中，一个发光的笑容盯着你。"

选项:
  1. 打开手电筒（需要电量>10%）
     → 100%成功，Smiler消失
     → 电量-10%
     
  2. 不看它，快速通过
     → 50%成功
     → 成功: 理智-10
     → 失败: 理智-20
     
  3. Noclip逃脱（需要Noclip等级>3）
     → 成功率看等级
     → 体力-10
     
  4. 站在原地（错误选择）
     → 理智-20，昏迷风险
```

---

#### Hound遭遇
```yaml
场景:
  "远处传来爪子刮地的声音。一个人形生物四肢着地奔跑而来。"

选项:
  1. 保持眼神接触后退（推荐）
     → 70%成功
     → 体力-10
     → 需要冷静（理智>30）
     
  2. 全力奔跑
     → 成功率看体力
     → 体力>60: 80%
     → 体力<40: 20%
     → 消耗体力-20
     
  3. 躲藏
     → 50%成功
     → 需要等待10分钟（时间成本）
     
  4. 使用杏仁水气味
     → 60%成功
     → 消耗杏仁水×1
```

---

#### Partygoer遭遇
```yaml
场景:
  "=) 来参加派对吧！很好玩的！=)"

选项:
  1. 立即逃离Level Fun（唯一正确选项）
     → 需要Noclip等级6+
     → 成功率50%
     → 失败: 被抓住感染
     
  2. 接受邀请（Game Over）
     → 生命-50，理智-30
     → 感染，72小时后转化
     
  3. 对抗（几乎无用）
     → Partygoer太多
     → 最多拖延时间
```

---

### 物资搜索遭遇

#### 搜索机制
```yaml
玩家选择"搜索当前区域":
  ↓
消耗时间（1-5分钟）:
  ↓
随机生成物资:
  ↓
杏仁水: 30%概率 +1瓶
物资包: 20%概率 +1份
手电筒电池: 15%概率 +50%
绳索: 5%概率 +1根
空无一物: 30%

搜索次数限制:
  每个节点最多搜索2次
  第3次搜索: 100%空无一物
```

---

### 随机事件遭遇

#### 事件类型

**正面事件（20%）**:
```yaml
发现Blub Cat:
  → 理智+10
  → 可选择带走作为宠物

遇到其他幸存者:
  → 理智+15
  → 可交换情报
  → 可能获得物资

发现隐藏补给:
  → 杏仁水×3 + 物资×2
```

**负面事件（30%）**:
```yaml
Drop Maze突然出现:
  → 需要立即选择（跳/绕行/用绳索）

停电（Level 1特有）:
  → 持续5-10分钟
  → 理智-10
  → Smiler可能出现

迷路:
  → 理智-15
  → 消耗时间
  → 需要Noclip或原路返回
```

**中性事件（50%）**:
```yaml
发现人类留言:
  → 提供层级信息
  → 轻微理智+5（不孤单）

发现人类遗骸:
  → 理智-20
  → 可搜刮物资（道德选择）

听到远处声音:
  → 调查（可能危险）或忽略
```

---

## 核心机制5: 层级切换

### 层级网络

```
      Level 0 （强制起点）
       ↙  ↓  ↘
 Level 1  Level 2  Level 3
       ↘  ↓  ↙
      Level 4 （核心中转）
          ↓
    Level 5, 6, 7, 8, 9, 10
          ↓
      Level 11 （定居地）

特殊:
  Level Fun（陷阱，可从任意Level误入）
```

---

### 层级切换方式

#### 方式1: 门/通道（固定出口）
```yaml
Level 0 → Level 1:
  找到"混凝土墙壁"标志的门
  穿过即可到达

Level 1 → Level 4:
  找到"办公室"标志的门
  推荐路线（安全）

Level 4 → Level 11:
  某些电梯（稀有）
  需要Noclip等级5+
```

---

#### 方式2: Noclip（主动穿越）
```yaml
低等级Noclip:
  随机传送（无法控制）
  可能到任意相邻层级

高等级Noclip:
  精确选择目标层级
  快速旅行
```

---

#### 方式3: Drop Maze（被动坠落）
```yaml
坠入Drop Maze:
  70% → 随机层级
  20% → Level 1（安全）
  5% → 隐藏层级
  5% → Frontrooms高空（死亡）

生命损失: -10
理智损失: -10
```

---

#### 方式4: 特殊触发
```yaml
Level Fun:
  误入"派对"标志的门
  看到"=)"符号
  被虚假邀请引诱

The End:
  某些特殊条件下
  可能触发结局层级
```

---

## 核心机制6: 时间与日期系统

### 时间流逝

```yaml
时间单位:
  1节点 ≈ 5分钟
  探索1个Level ≈ 30分钟到1小时
  睡眠 ≈ 6-8小时

累积效果:
  理智环境消耗（每小时）
  体力自然恢复（每10分钟）
  饥饿值（每6小时-10）
  口渴值（每3小时-15）
```

---

### 日期记录

```javascript
游戏内日期:
  Day 1: 刚进入Level 0
  Day 3-7: 大部分玩家到达Level 4
  Day 15+: 考虑定居Level 11

孤独计数:
  独处Days影响理智消耗
  遇到他人重置计数
```

---

### 睡眠机制

```yaml
睡眠需求:
  每16-20小时需要睡眠
  不睡眠: 体力恢复-50%

睡眠效果:
  生命: +15/小时
  理智: +15/小时（安全区）
  体力: +50/小时

睡眠风险:
  Level 0-2: 高风险（实体攻击）
  Level 4, 11: 安全
  建议只在安全区睡眠
```

---

## 进阶循环设计

### 新手循环（Day 1-3）

```
00:00 - Noclip进入Level 0
    ↓
学习基础操作（探索、搜索、查看状态）
    ↓
首次遭遇Smiler（理智-20，学习手电筒）
    ↓
找到杏仁水（理智恢复）
    ↓
寻找出口（Noclip教学）
    ↓
到达Level 1（环境改善）
    ↓
补给杏仁水×3（建立安全感）
    ↓
寻找Level 4（目标设定）
```

**学习目标**:
- 理解三大属性
- 学会使用杏仁水
- 掌握基础Noclip
- 认识主要实体

---

### 探索循环（Day 4-10）

```
从Level 4出发（补满杏仁水×10）
    ↓
选择探索目标（Level 2/5/11）
    ↓
探索新层级（30-60分钟）
    ↓
遭遇实体（应对练习）
    ↓
收集物资
    ↓
理智<40或生命<40
    ↓
返回Level 4恢复
    ↓
整理收获，计划下次探索
    ↓
循环
```

**玩法深化**:
- Noclip等级提升
- 实体应对策略
- 资源管理优化
- 层级网络理解

---

### 结局追求循环（Day 11+）

```
决定追求的结局:
  ├─ 逃离: 探索传说中的出口
  ├─ 定居: 前往Level 11建立基地
  ├─ 完美主义: 探索所有层级
  └─ 作死: 挑战Level 5 + Level Fun

根据目标行动:
    ↓
收集必需资源
    ↓
提升Noclip等级到9+
    ↓
完成结局触发条件
    ↓
达成结局
    ↓
重玩追求不同结局
```

---

## 难度曲线设计

### 难度阶梯

```
简单（Level 0-1）- 教学引导
    ↓
中等（Level 2-4）- 建立策略
    ↓
困难（Level 5-7）- 挑战极限
    ↓
地狱（Level Fun）- 考验技巧
    ↓
自由（Level 11）- 定居选择
```

---

### 难度平衡点

```yaml
新手友好:
  - Level 0前20分钟无必死遭遇
  - Level 4永远安全（避难所）
  - 杏仁水获取容易（Level 1, 4）

挑战性:
  - Level 5的The Beast必须快速决策
  - Level Fun几乎无法逃脱
  - 资源管理错误会导致死亡

公平性:
  - 所有死亡都有预警
  - 理智<20时提示"你快要疯了"
  - 生命<20时提示"你濒临死亡"
  - Level Fun有明显陷阱标志（"=)"）
```

---

## 总结：机制协同

### 机制闭环

```
理智管理 ←→ 杏仁水收集
    ↕
生存决策 ←→ 风险评估
    ↕
层级探索 ←→ Noclip提升
    ↕
实体遭遇 ←→ 资源消耗
    ↕
循环强化
```

### 设计哲学

1. **选择的意义** - 没有"唯一正确"的路径
2. **资源的珍贵** - 每瓶杏仁水都是生命线
3. **风险与回报** - 高危层级有高回报
4. **技能成长** - Noclip等级是玩家"变强"的体现

---

**下一章**: [03-节点与剧情设计](./03-节点与剧情设计.md) - StoryNode结构与剧情分支

---

**最后更新**: 2025-10-29  
**文档状态**: ✅ 完成  
**版本**: v1.0

