# 04-UI-UX设计

> **从界面到沉浸：Backrooms的交互体验设计**

---

## UI设计哲学

### 核心原则

```yaml
最小化干扰:
  - UI不应破坏沉浸感
  - 避免过多装饰和特效
  - 信息清晰但不突兀

氛围优先:
  - UI风格符合Backrooms美学
  - 使用单调色调（黄、灰、黑）
  - 字体选择增强压抑感

功能性第一:
  - 所有信息一目了然
  - 重要警告清晰可见
  - 操作直观易懂
```

---

## 主界面布局

### 游戏画面布局

```
┌──────────────────────────────────────────────────────────┐
│  [三大属性条]                            [物资信息]       │  ← 顶部HUD
├──────────────────────────────────────────────────────────┤
│                                                          │
│                                                          │
│                                                          │
│                                                          │
│                    背景图片区域                           │
│                  （1920×1080）                           │
│                                                          │
│                  [可点击热区]                             │
│                                                          │
│                                                          │
│                                                          │
├──────────────────────────────────────────────────────────┤
│  [文本框]                                                │  ← 底部文本区
│  场景描述文本                                            │
│  ...                                                     │
│                                                          │
│  [选项按钮1] [选项按钮2] [选项按钮3]                      │
└──────────────────────────────────────────────────────────┘

尺寸规格:
  - 总画面: 1920×1080（16:9）
  - 顶部HUD: 1920×80
  - 背景图区: 1920×750
  - 文本框: 1920×250
```

---

### 顶部HUD设计

```
┌──────────────────────────────────────────────────────────┐
│ 🧠 理智: ████████░░ 80/100  💧 杏仁水: 12    📦 物资: 8  │
│ ❤️  生命: ██████░░░░ 60/100  🔦 电量: 75%    🪢 绳索: 1  │
│ ⚡ 体力: ███████░░░ 70/100   📍 Level 1      ⏱️  Day 5   │
└──────────────────────────────────────────────────────────┘

元素说明:
  - 进度条: 使用█字符，视觉清晰
  - 颜色编码:
    - 理智: 蓝色（理性）
    - 生命: 红色（危险）
    - 体力: 绿色（能量）
  - 警告状态:
    - <30: 闪烁黄色
    - <10: 闪烁红色
```

---

### 文本框设计

```
┌──────────────────────────────────────────────────────────┐
│ Level 0 - 黄色走廊                              [菜单] ≡  │
├──────────────────────────────────────────────────────────┤
│ 你站在一条无尽延伸的走廊中。黄色墙纸覆盖着两侧的         │
│ 墙壁，陈旧且微微剥落。天花板上的荧光灯发出单调的         │
│ 嗡鸣声，永不停歇。                                       │
│                                                          │
│ 地毯湿漉漉的，踩上去发出吱吱声。空气中弥漫着霉味         │
│ 和潮湿的气息。                                           │
│                                                          │
│ 你已经走了多久？10分钟？1小时？你不记得了。              │
├──────────────────────────────────────────────────────────┤
│  [→ 前方走廊]  [🚪 左侧的门]  [💡 搜索物资]  [📊 状态]  │
└──────────────────────────────────────────────────────────┘

样式规范:
  - 字体: 等宽字体（Consolas/Courier New）
  - 字号: 16-18px
  - 行距: 1.6倍
  - 背景: 半透明黑色（rgba(0,0,0,0.7)）
  - 文字: 浅灰色或米白色
  - 按钮: 边框样式，悬停高亮
```

---

## 图片驱动模式设计

### 背景图与热区

```
背景图示例（Level 0走廊）:
┌──────────────────────────────────────────────────────────┐
│                       天花板                              │
│  ┌────────────────────────────────────────┐              │
│  │                                        │              │
│  │          前方走廊（热区1）              │              │
│  │                                        │              │
│  │                ↓                       │              │
│  └────────────────────────────────────────┘              │
│                                                          │
│  [门]热区2        墙壁        墙壁        [裂缝]热区3    │
│                                                          │
│                       地毯                                │
└──────────────────────────────────────────────────────────┘

热区配置:
  热区1（前方走廊）:
    - 位置: (960, 400)
    - 大小: 400×300
    - 形状: 矩形
    - 目标: level0_corridor_02
    
  热区2（左侧门）:
    - 位置: (300, 500)
    - 大小: 150×250
    - 形状: 矩形
    - 目标: level0_room_01
    
  热区3（墙壁裂缝）:
    - 位置: (1600, 450)
    - 大小: 100×150
    - 形状: 不规则多边形
    - 目标: noclip_attempt_01
```

---

### 热区交互反馈

```yaml
鼠标悬停:
  - 热区高亮（淡黄色边框）
  - 鼠标变为手型指针
  - 显示工具提示:"点击前往"

点击:
  - 短暂闪烁效果
  - 0.3秒淡出动画
  - 加载下一节点

不可用状态:
  - 灰色半透明
  - 显示条件:"需要Noclip等级3"
  - 鼠标变为禁止图标
```

---

## 关键界面设计

### 1. 标题画面

```
┌──────────────────────────────────────────────────────────┐
│                                                          │
│                                                          │
│                    B A C K R O O M S                     │
│                                                          │
│                    If you're not careful and you         │
│                  noclip out of reality in the wrong      │
│                      areas, you'll end up in            │
│                      the Backrooms...                    │
│                                                          │
│                                                          │
│                    [开始游戏]                             │
│                    [继续游戏]                             │
│                    [设置]                                 │
│                    [关于]                                 │
│                                                          │
│                                                          │
│                                                          │
│             v1.0    ©2025    MoScript Engine            │
└──────────────────────────────────────────────────────────┘

背景: Level 0的标志性黄色走廊（模糊）
音效: 低沉的荧光灯嗡鸣（可选）
字体: 等宽字体，复古风格
```

---

### 2. 状态界面

```
┌──────────────────────────────────────────────────────────┐
│                      [ 状 态 ]                            │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  核心属性                        物资                     │
│  ├ 理智值: 80/100 🟦🟦🟦🟦🟦🟦🟦🟦⬜⬜   杏仁水: 12瓶       │
│  ├ 生命值: 60/100 🟥🟥🟥🟥🟥🟥⬜⬜⬜⬜   物资包: 8份        │
│  └ 体力值: 70/100 🟩🟩🟩🟩🟩🟩🟩⬜⬜⬜   绳索: 1根          │
│                                     手电筒: 75%        │
│                                                          │
│  状态效果                        进度                     │
│  ├ 正常                           当前层级: Level 1      │
│  ├ 无异常                         Noclip等级: 3/10       │
│  └ 体力恢复+100%                   生存天数: Day 5       │
│                                   探索层级: 3个          │
│                                                          │
│  成就                                                    │
│  ✅ 首次Noclip          ⬜ 发现Level 4    ⬜ 逃离后室   │
│  ✅ 遭遇Smiler          ⬜ 收养Blub Cat   ⬜ 达成完美结局│
│                                                          │
│                      [返回游戏]                           │
└──────────────────────────────────────────────────────────┘
```

---

### 3. 物资使用界面

```
┌──────────────────────────────────────────────────────────┐
│                    [ 使用物资 ]                           │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [图标] 杏仁水 ×12                                        │
│  ┌────────────────────────────────────────┐              │
│  │ 效果: 理智+20, 生命+5, 体力+10         │              │
│  │ 描述: 淡蓝色液体，散发杏仁香气。       │              │
│  │       后室中最重要的资源。             │              │
│  │                                        │              │
│  │ 当前状态:                              │              │
│  │ 理智: 80/100 → 100/100 (+20)          │              │
│  │ 生命: 60/100 → 65/100 (+5)            │              │
│  │ 体力: 70/100 → 80/100 (+10)           │              │
│  │                                        │              │
│  │         [使用] [取消]                  │              │
│  └────────────────────────────────────────┘              │
│                                                          │
│  [图标] 物资包 ×8                                         │
│  [图标] 手电筒 (75%)                                      │
│  [图标] 绳索 ×1                                           │
│                                                          │
└──────────────────────────────────────────────────────────┘

交互:
  - 点击物品 → 显示详情
  - 使用 → 扣除数量，增加属性
  - 快捷键: 1-4对应4种物资
```

---

### 4. 遭遇界面（特殊）

```
┌──────────────────────────────────────────────────────────┐
│                   ⚠️  遭遇：Smiler  ⚠️                     │
├──────────────────────────────────────────────────────────┤
│                                                          │
│                  [Smiler图片]                             │
│               黑暗中的发光笑容                             │
│                                                          │
├──────────────────────────────────────────────────────────┤
│ 黑暗的转角处，你突然看到了它。                            │
│                                                          │
│ 一个发光的笑容，悬浮在虚空中。数十颗尖锐的牙齿           │
│ 组成的笑容，每颗都散发着幽绿色的光。                     │
│                                                          │
│ 你的心跳加速。它一动不动，只是...盯着你。                │
│                                                          │
│ 【理智 -20】 当前理智: 60/100                            │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  [💡 打开手电筒] (100%成功，电量-10%)                     │
│                                                          │
│  [🏃 快速通过] (50%成功)                                  │
│                                                          │
│  [🌀 Noclip逃脱] (需要Noclip等级3+)                      │
│                                                          │
│  [⏸️  站在原地] (危险！)                                  │
│                                                          │
└──────────────────────────────────────────────────────────┘

特殊效果:
  - 背景暗化
  - 文字闪烁（低理智时）
  - 紧张音效（可选）
  - 时间限制显示（如有）
```

---

### 5. Noclip界面

```
┌──────────────────────────────────────────────────────────┐
│                    [ N o c l i p ]                       │
├──────────────────────────────────────────────────────────┤
│                                                          │
│  你将手掌贴在墙壁上...                                    │
│                                                          │
│  [墙壁纹理动画]                                           │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░                           │
│  ░░░░░█████████████░░░░░░░░░                            │
│  ░░░░███████████████████░░░░                            │
│  ░░░████████████████████░░░░  ← 手掌位置                │
│  ░░░░███████████████████░░░░                            │
│  ░░░░░█████████████░░░░░░░░░                            │
│  ░░░░░░░░░░░░░░░░░░░░░░░░░░░░                           │
│                                                          │
│  当前Noclip等级: 3/10                                    │
│  成功率: 50%                                             │
│  失败后果: 随机传送到未知层级                             │
│                                                          │
│  目标层级:                                                │
│  ⚫ 随机（无法控制）                                      │
│                                                          │
│         [尝试Noclip] [取消]                              │
│                                                          │
└──────────────────────────────────────────────────────────┘

动画效果:
  - 墙壁纹理扭曲
  - 手掌逐渐"穿过"
  - 成功: 白光闪烁
  - 失败: 红光闪烁，反弹
```

---

### 6. 结局界面

```
┌──────────────────────────────────────────────────────────┐
│                                                          │
│                                                          │
│                                                          │
│                    [ 结 局 A ]                            │
│                                                          │
│                      逃离后室                             │
│                                                          │
│                                                          │
│             你成功回到了Frontrooms                        │
│                                                          │
│                 生存天数: 18天                            │
│                 探索层级: 9个                             │
│                 Noclip等级: 9/10                         │
│                                                          │
│                                                          │
│              [重新开始] [查看统计]                         │
│                                                          │
│                                                          │
└──────────────────────────────────────────────────────────┘

背景: Level 0的黄色走廊淡出，阳光照入
音效: 舒缓的音乐（结局主题）
动画: 文字淡入淡出
```

---

## 交互流程设计

### 基础操作流程

```
玩家进入节点
    ↓
1. 加载背景图（淡入动画，0.5秒）
    ↓
2. 执行onEnter脚本（理智消耗等）
    ↓
3. 显示文本（打字机效果，可选）
    ↓
4. 显示选项按钮（淡入）
    ↓
5. 等待玩家选择
    ↓
玩家点击选项
    ↓
6. 执行选项脚本
    ↓
7. 淡出当前节点
    ↓
8. 跳转到目标节点
    ↓
循环
```

---

### 遭遇战斗流程

```
进入遭遇节点
    ↓
1. 屏幕闪红（0.2秒）
    ↓
2. 显示实体图片（放大动画）
    ↓
3. 播放遭遇文本
    ↓
4. 理智/生命立即扣除
    ↓
5. 显示对抗选项
    ↓
玩家选择应对方式
    ↓
6. 执行判定脚本（随机数）
    ↓
7a. 成功 → 逃脱节点
7b. 失败 → 受伤节点 → 可能死亡
    ↓
返回探索流程
```

---

### 物资使用流程

```
玩家打开物资界面（按Tab或点击按钮）
    ↓
1. 暂停游戏
    ↓
2. 显示物资列表
    ↓
3. 玩家选择物资
    ↓
4. 显示物资详情和效果预览
    ↓
5. 玩家确认使用
    ↓
6. 扣除物资数量
    ↓
7. 增加对应属性（动画显示）
    ↓
8. 播放使用音效（可选）
    ↓
9. 关闭界面，恢复游戏
```

---

## 视觉风格指南

### 色彩方案

```yaml
主色调:
  Level 0: 
    - 主色: #F4E6A0 (黄色墙纸)
    - 辅色: #8B7355 (陈旧地毯)
    - 光照: #FFFACD (荧光灯)
    
  Level 1:
    - 主色: #A9A9A9 (混凝土灰)
    - 辅色: #696969 (金属暗灰)
    - 光照: #C0C0C0 (工业光)
    
  Level 4:
    - 主色: #F5F5F5 (白色墙壁)
    - 辅色: #A9A9A9 (灰色地毯)
    - 光照: #FFFFFF (明亮光)
    
  Level Fun:
    - 主色: #FFD700 (金色气球)
    - 辅色: #FF69B4 (粉色彩带)
    - 光照: #FF00FF (霓虹灯)

UI色彩:
  - 背景: #1A1A1A (深黑)
  - 文字: #E0E0E0 (浅灰)
  - 强调: #FFD700 (金色)
  - 警告: #FF4444 (红色)
  - 成功: #44FF44 (绿色)
```

---

### 字体设计

```yaml
标题字体:
  - 字体族: Courier New, Consolas
  - 字号: 32px
  - 字重: Bold
  - 字间距: 2px
  - 效果: 复古电脑风格

正文字体:
  - 字体族: Consolas, Monaco
  - 字号: 16-18px
  - 字重: Regular
  - 行高: 1.6
  - 效果: 等宽，易读

按钮字体:
  - 字体族: Arial, sans-serif
  - 字号: 14-16px
  - 字重: Bold
  - 效果: 清晰简洁

数据字体（属性值）:
  - 字体族: Courier New
  - 字号: 14px
  - 字重: Bold
  - 颜色: 根据数值变化
```

---

### 动画效果

```yaml
节点切换:
  - 淡出: 0.3秒 ease-out
  - 淡入: 0.5秒 ease-in
  - 总时长: 0.8秒

文本显示:
  - 打字机效果: 30字符/秒（可关闭）
  - 段落间隔: 0.5秒
  - 可跳过

属性变化:
  - 理智增加: 绿色闪光 + 数字上浮
  - 理智减少: 红色闪光 + 数字下沉
  - 生命变化: 同上
  - 持续时间: 0.8秒

遭遇特效:
  - 屏幕闪烁: 3次，每次0.1秒
  - 实体放大: 1.2倍，1秒
  - 理智暴跌: 进度条快速下降

Noclip特效:
  - 墙壁扭曲: 波纹效果
  - 视野闪烁: 白光2秒
  - 传送: 旋转淡出

死亡特效:
  - 屏幕变红: 渐变到全红
  - 文字模糊: 失焦效果
  - 淡出到黑: 3秒
```

---

## 响应式设计

### 不同分辨率适配

```yaml
1920×1080 (Full HD, 默认):
  - 完整UI，所有元素正常显示

1366×768 (常见笔记本):
  - 压缩HUD高度: 80px → 60px
  - 文本框高度: 250px → 200px
  - 字号略微缩小: 16px → 14px

2560×1440 (2K):
  - 放大UI: 1.25倍
  - 保持比例

3840×2160 (4K):
  - 放大UI: 2倍
  - 高清图片资源

移动端（未来扩展）:
  - 竖屏布局
  - 简化HUD
  - 大按钮
```

---

## 辅助功能

### 无障碍设计

```yaml
色盲模式:
  - 提供色盲友好配色
  - 理智/生命/体力使用不同形状图标
  - 不依赖颜色传达信息

字体大小:
  - 可调节: 小/中/大
  - 默认: 中号（16px）

阅读辅助:
  - 打字机效果可关闭
  - 文本可暂停
  - 支持屏幕阅读器（alt文本）

操作辅助:
  - 键盘快捷键
  - 鼠标悬停提示
  - 可配置按键
```

---

### 快捷键设计

```yaml
全局快捷键:
  Esc: 打开菜单
  Tab: 打开状态界面
  I: 打开物资界面
  M: 打开地图（如有）
  F11: 全屏切换

物资快捷键:
  1: 使用杏仁水
  2: 使用物资包
  3: 使用手电筒
  4: 使用绳索

选项快捷键:
  1-9: 选择对应选项
  Space: 确认/下一页
  Backspace: 返回上一节点（如允许）

调试快捷键（开发模式）:
  Ctrl+S: 添加理智
  Ctrl+H: 添加生命
  Ctrl+A: 添加杏仁水
  Ctrl+N: 提升Noclip等级
```

---

## UI实现清单

### MVP阶段（Phase 1）

**必需界面**:
- [x] 主界面布局（顶部HUD + 背景 + 文本框）
- [x] 标题画面
- [ ] 状态界面
- [ ] 物资使用界面
- [ ] 基础遭遇界面
- [ ] 简单Noclip界面
- [ ] 游戏结束界面（死亡/结局）

**必需交互**:
- [ ] 节点跳转（淡入淡出）
- [ ] 选项点击
- [ ] 热区点击
- [ ] 物资使用
- [ ] 快捷键支持

**必需反馈**:
- [ ] 属性变化动画
- [ ] 遭遇闪烁效果
- [ ] 理智警告（<30时）
- [ ] 生命警告（<20时）

---

### Phase 2扩展

**增强界面**:
- [ ] 地图界面（显示已探索层级）
- [ ] 日记界面（记录玩家经历）
- [ ] 成就界面（解锁成就展示）
- [ ] 详细统计界面（死亡次数、遭遇统计等）

**增强交互**:
- [ ] 打字机效果（可选）
- [ ] 实体动画（简单2D动画）
- [ ] 环境音效
- [ ] 背景音乐

**增强反馈**:
- [ ] Noclip动画升级
- [ ] 理智低时的视觉扭曲
- [ ] 过渡动画优化
- [ ] 粒子效果（可选）

---

## UI测试清单

### 可用性测试

```yaml
信息可读性:
  - [ ] 所有文字清晰可读
  - [ ] 属性值一目了然
  - [ ] 警告信息明显

操作直观性:
  - [ ] 新玩家5分钟内掌握基础操作
  - [ ] 选项功能清晰
  - [ ] 热区容易发现

反馈及时性:
  - [ ] 点击立即有反馈
  - [ ] 属性变化实时显示
  - [ ] 加载时间<1秒

一致性:
  - [ ] 所有界面风格统一
  - [ ] 交互方式一致
  - [ ] 术语使用一致
```

---

### 性能测试

```yaml
加载性能:
  - [ ] 节点切换<0.5秒
  - [ ] 图片加载<1秒
  - [ ] 无明显卡顿

动画流畅度:
  - [ ] 60 FPS
  - [ ] 动画无掉帧
  - [ ] 过渡平滑

资源占用:
  - [ ] 内存<500MB
  - [ ] CPU<30%
  - [ ] 适合中低配电脑
```

---

## 总结：沉浸式UI

### 设计目标
- **不打扰** - UI不应破坏沉浸感
- **清晰** - 信息传达直观明确
- **美观** - 符合Backrooms美学
- **高效** - 操作流畅，反馈及时

### 核心理念
> "最好的UI是看不见的UI。  
> 玩家应该沉浸在Backrooms的世界中，  
> 而不是被界面元素分散注意力。"

---

**下一章**: [05-数值平衡](./05-数值平衡.md) - 游戏平衡性设计

---

**最后更新**: 2025-10-29  
**文档状态**: ✅ 完成  
**版本**: v1.0

