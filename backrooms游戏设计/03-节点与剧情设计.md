# 03-节点与剧情设计

> **从StoryNode到Backrooms：节点流系统的剧情架构**

---

## StoryNode基础概念

### 什么是StoryNode？

```yaml
StoryNode:
  定义: MoScript引擎的基础内容单元
  类比: 
    - 传统文字游戏的"段落"
    - 选择游戏的"场景"
    - Twine游戏的"Passage"
    
  核心功能:
    - 展示文本内容
    - 显示背景图片
    - 提供选项分支
    - 执行Blockly脚本
    - 跳转到其他节点
```

---

### Backrooms中的节点映射

```
现实世界概念 → StoryNode映射

Level 0的一条走廊 → 1个StoryNode
Level 1的仓库大厅 → 1个StoryNode
实体遭遇场景 → 1个遭遇StoryNode
Noclip传送过程 → 1个转场StoryNode
Level 4的茶水间 → 1个补给StoryNode

一个完整Level = 10-30个互相连接的StoryNode
```

---

## 节点类型系统

### 1. 场景节点（Scene Node）

**用途**: 展示环境，提供探索选项

**示例结构**:
```json
{
  "id": "level0_corridor_01",
  "title": "Level 0 - 黄色走廊",
  "type": "scene",
  "background": "level0_corridor.jpg",
  
  "content": "你站在一条无尽延伸的走廊中。黄色墙纸覆盖着两侧的墙壁，陈旧且微微剥落。天花板上的荧光灯发出单调的嗡鸣声，永不停歇。\n\n地毯湿漉漉的，踩上去发出吱吱声。空气中弥漫着霉味和潮湿的气息。\n\n你已经走了多久？10分钟？1小时？你不记得了。",
  
  "hotspots": [
    {
      "id": "forward",
      "label": "前方走廊",
      "position": {"x": 960, "y": 400},
      "target": "level0_corridor_02"
    },
    {
      "id": "left_door",
      "label": "左侧的门",
      "position": {"x": 300, "y": 500},
      "target": "level0_room_01"
    },
    {
      "id": "right_crack",
      "label": "墙壁上的裂缝",
      "position": {"x": 1600, "y": 450},
      "target": "noclip_attempt_01"
    }
  ],
  
  "onEnter": "blockly_sanity_decrease_5"
}
```

**关键元素**:
- `background`: 场景图片，营造氛围
- `hotspots`: 可点击热区，对应游戏选项
- `onEnter`: 进入时执行脚本（理智消耗）

---

### 2. 遭遇节点（Encounter Node）

**用途**: 实体遭遇，提供战斗/逃跑选项

**示例结构**:
```json
{
  "id": "encounter_smiler_01",
  "title": "遭遇：Smiler",
  "type": "encounter",
  "background": "smiler_encounter.jpg",
  
  "content": "黑暗的转角处，你突然看到了它。\n\n一个发光的笑容，悬浮在虚空中。数十颗尖锐的牙齿组成的笑容，每颗都散发着幽绿色的光。笑容上方，两只椭圆形的眼睛也在发光，正盯着你。\n\n你的心跳加速。它一动不动，只是...盯着你。",
  
  "options": [
    {
      "id": "use_flashlight",
      "text": "打开手电筒",
      "condition": "flashlight_battery >= 10",
      "target": "smiler_flee",
      "script": "blockly_smiler_defeated"
    },
    {
      "id": "run_away",
      "text": "不看它，快速通过",
      "target": "smiler_gamble",
      "script": "blockly_random_50"
    },
    {
      "id": "try_noclip",
      "text": "尝试Noclip逃脱",
      "condition": "noclip_level >= 3",
      "target": "noclip_escape",
      "script": "blockly_noclip_attempt"
    },
    {
      "id": "freeze",
      "text": "站在原地（理智不足时看不到正确选项）",
      "target": "smiler_attack",
      "script": "blockly_sanity_decrease_20"
    }
  ],
  
  "onEnter": "blockly_encounter_smiler"
}
```

**关键元素**:
- `options`: 多分支选项
- `condition`: 显示条件（需要手电筒电量、Noclip等级等）
- `script`: 执行逻辑（随机判定、属性变化）

---

### 3. 补给节点（Supply Node）

**用途**: 资源获取，恢复状态

**示例结构**:
```json
{
  "id": "level4_water_dispenser",
  "title": "Level 4 - 茶水间",
  "type": "supply",
  "background": "level4_breakroom.jpg",
  
  "content": "你推开茶水间的门。\n\n这是一个标准的办公室茶水间：白色墙壁，整洁的柜台，一台微波炉，一个冰箱。\n\n最重要的是——墙角有一台饮水机。你走过去按下按钮，淡蓝色的液体流入杯中。\n\n杏仁水。无限的杏仁水。\n\n你第一次感到真正的安全。",
  
  "options": [
    {
      "id": "collect_almond_water",
      "text": "收集杏仁水（+5瓶）",
      "target": "level4_water_dispenser",
      "script": "blockly_add_almond_water_5",
      "repeatable": true
    },
    {
      "id": "drink_now",
      "text": "立即饮用一瓶",
      "target": "level4_water_dispenser",
      "script": "blockly_use_almond_water",
      "repeatable": true
    },
    {
      "id": "rest_here",
      "text": "在这里休息（恢复理智）",
      "target": "level4_rest",
      "script": "blockly_rest_in_safe_zone"
    },
    {
      "id": "leave",
      "text": "离开茶水间",
      "target": "level4_main_office"
    }
  ],
  
  "onEnter": "blockly_reached_safe_zone"
}
```

**关键元素**:
- `repeatable`: 可重复执行的选项（多次收集）
- 无负面后果，纯正面体验
- 提供"喘息"时刻

---

### 4. 转场节点（Transition Node）

**用途**: 层级切换，Noclip过程

**示例结构**:
```json
{
  "id": "noclip_level0_to_level1",
  "title": "Noclip...",
  "type": "transition",
  "background": "noclip_animation.jpg",
  
  "content": "你将手掌贴在墙壁上。\n\n混凝土的质感...突然变得柔软。不，不是柔软——是虚幻。你的手指穿了过去，像穿过一层水帘。\n\n你深吸一口气，向前走。\n\n视野闪烁。黄色走廊消失。\n\n【Noclip成功】\n\n你跌入一个巨大的混凝土仓库。天花板高达10米，空气中弥漫着杏仁的香气。\n\n欢迎来到Level 1。",
  
  "autoNext": {
    "delay": 3000,
    "target": "level1_entrance"
  },
  
  "onEnter": "blockly_noclip_success_level1"
}
```

**关键元素**:
- `autoNext`: 自动跳转（3秒后）
- 用于营造"传送"感
- 无选项，纯叙事

---

### 5. 决策节点（Decision Node）

**用途**: 重大选择，影响结局

**示例结构**:
```json
{
  "id": "level_fun_entrance",
  "title": "??? - 派对入口",
  "type": "decision",
  "background": "level_fun_door.jpg",
  
  "content": "前方有一扇门。\n\n门上贴满了彩色气球贴纸和笑脸。你能听到门后传来欢快的音乐和笑声。\n\n墙上写着："Come Party With Us! =)"\n\n这...看起来很友善？\n\n但你的直觉在尖叫：**不要进去。**",
  
  "options": [
    {
      "id": "enter_party",
      "text": "推开门（这看起来很有趣！）",
      "target": "level_fun_interior",
      "script": "blockly_enter_level_fun",
      "warning": "⚠️ 这个选择可能导致Bad Ending"
    },
    {
      "id": "walk_away",
      "text": "立即离开（相信直觉）",
      "target": "level1_corridor_03",
      "script": "blockly_avoid_level_fun"
    },
    {
      "id": "investigate",
      "text": "靠近但不进入",
      "target": "level_fun_warning",
      "script": "blockly_investigate_trap"
    }
  ],
  
  "onEnter": "blockly_major_decision_point"
}
```

**关键元素**:
- `warning`: 危险选项警告
- 重大分支点
- 影响结局走向

---

## 节点网络设计

### Level 0节点网络

```
level0_start（起点）
    ├─→ level0_corridor_01（走廊A）
    │     ├─→ level0_corridor_02（走廊B）
    │     ├─→ level0_room_01（小房间）
    │     └─→ encounter_bonethief_01（遭遇：Bone Thief）
    │
    ├─→ level0_corridor_03（走廊C）
    │     ├─→ level0_dead_end（死路）
    │     └─→ level0_drop_maze（Drop Maze）
    │
    ├─→ level0_search_supplies（搜索物资）
    │     └─→ level0_corridor_02
    │
    └─→ noclip_to_level1（Noclip出口）
          └─→ level1_entrance
```

**节点数量**: 约15个  
**平均游玩时长**: 15-25分钟  
**主要目标**: 学习机制，找到出口

---

### Level 1节点网络

```
level1_entrance（入口）
    ├─→ level1_main_warehouse（主仓库）
    │     ├─→ level1_storage_area（储物区，物资）
    │     ├─→ level1_tool_zone（工具区，绳索）
    │     ├─→ level1_fog_area（雾气区，杏仁水）
    │     └─→ encounter_hound_01（遭遇：Hound）
    │
    ├─→ level1_rest_area（休息区）
    │     ├─→ level1_sleep（睡眠）
    │     └─→ level1_organize（整理物资）
    │
    ├─→ level1_blackout（停电事件）
    │     └─→ encounter_smiler_02（停电中的Smiler）
    │
    ├─→ noclip_to_level4（通往Level 4）
    │     └─→ level4_entrance
    │
    ├─→ noclip_to_level2（通往Level 2）
    │     └─→ level2_entrance
    │
    └─→ noclip_to_level11（通往Level 11，需Noclip 4+）
          └─→ level11_entrance
```

**节点数量**: 约25个  
**平均游玩时长**: 30-45分钟  
**主要目标**: 补给基地，中转站

---

### Level 4节点网络

```
level4_entrance（入口）
    ├─→ level4_main_office（主办公区）
    │     ├─→ level4_cubicle_01-10（10个隔间）
    │     └─→ level4_meeting_room（会议室）
    │
    ├─→ level4_breakroom（茶水间，杏仁水！）
    │     └─→ level4_water_dispenser（饮水机）
    │
    ├─→ level4_rest_zone（休息区）
    │     ├─→ level4_sleep（睡眠，+15理智/小时）
    │     ├─→ level4_write_diary（书写日记）
    │     └─→ level4_plan（计划下次探索）
    │
    ├─→ level4_storage（储藏室，存放物资）
    │
    └─→ level4_exits（出口选择）
          ├─→ noclip_to_level1
          ├─→ noclip_to_level2
          ├─→ noclip_to_level5
          └─→ noclip_to_level11
```

**节点数量**: 约15个  
**平均游玩时长**: 自由（可长期停留）  
**主要目标**: 安全区，主基地

---

### Level Fun节点网络（陷阱）

```
level_fun_entrance（误入）
    ↓
level_fun_interior（派对大厅）
    ├─→ encounter_partygoer_01（必定遭遇）
    │     ├─→ escape_success（Noclip逃脱，50%）
    │     │     └─→ level1_entrance（逃回Level 1）
    │     │
    │     └─→ escape_failed（被抓住）
    │           └─→ partygoer_infected（感染）
    │                 └─→ transformation_countdown（72小时倒计时）
    │                       ├─→ cure_attempt（前往Level 4治疗）
    │                       │     ├─→ cure_success（50%，康复）
    │                       │     └─→ cure_failed（50%，转化）
    │                       │
    │                       └─→ no_cure（未治疗）
    │                             └─→ ending_partygoer（Bad Ending）
```

**节点数量**: 约8个  
**平均游玩时长**: 5-10分钟（生死时刻）  
**主要目标**: 极限逃生，考验技巧

---

## 剧情分支设计

### 主线剧情

#### 阶段1: 迷失（Level 0-1）

```
开场 → Noclip进入Level 0
    ↓
【必经节点】
  - level0_start（醒来）
  - level0_tutorial（教学）
  - encounter_smiler_tutorial（首次遭遇）
  - level0_find_almond_water（找到杏仁水）
    ↓
【目标】找到Level 1的出口
    ↓
level0_exit → Noclip → level1_entrance
    ↓
【必经节点】
  - level1_first_impression（环境改善）
  - level1_collect_almond_water（补给）
  - level1_discover_level4_rumor（听说Level 4）
    ↓
【目标】找到Level 4
```

---

#### 阶段2: 生存（Level 4-建立基地）

```
level1 → level4_entrance
    ↓
【必经节点】
  - level4_first_arrival（第一次到达）
  - level4_discover_water（发现无限杏仁水）
  - level4_establish_base（建立基地）
    ↓
【目标】探索其他层级，提升Noclip等级
    ↓
【自由探索循环】
  level4 → 探索Level 2/5/11 → 返回level4 → 循环
```

---

#### 阶段3: 抉择（追求结局）

```
Noclip等级≥6 + Day≥10
    ↓
【触发结局线索】
  - level4_ending_hint（墙上的涂鸦）
  - level11_ending_choice（定居机会）
  - level_mystery_exit（传说中的出口）
    ↓
【玩家选择追求的结局】
    ├─→ 结局A: 逃离Frontrooms
    ├─→ 结局B: 定居Level 11
    ├─→ 结局C: 继续探索（开放式）
    ├─→ 结局D: 理智崩溃（失败）
    └─→ 结局E: 被转化（失败）
```

---

### 支线剧情

#### 支线1: Blub Cat的陪伴

```
【触发】level1遭遇Blub Cat
    ↓
encounter_blub_cat
    ├─→ adopt_blub_cat（收养）
    │     ├─→ blub_cat_companion（持续陪伴，理智+2/小时）
    │     ├─→ blub_cat_events（随机事件）
    │     └─→ blub_cat_ending（带着Blub Cat达成结局）
    │
    └─→ leave_blub_cat（离开）
          └─→ 无后续
```

---

#### 支线2: 幸存者的日记

```
【触发】搜索时发现日记
    ↓
discover_diary_01
    ├─→ read_diary（阅读，获得情报）
    │     ├─→ discover_diary_02（找到第2本）
    │     ├─→ discover_diary_03（找到第3本）
    │     └─→ diary_complete（完整故事，理智+20）
    │
    └─→ ignore_diary（忽略）
          └─→ 无后续
```

---

#### 支线3: Jerry的诱惑

```
【触发】Level 1罕见遭遇（5%）
    ↓
encounter_jerry
    ├─→ touch_jerry（触摸）
    │     └─→ become_jerry_follower（转化为信徒，Game Over）
    │
    ├─→ interact_no_touch（互动但不触摸）
    │     └─→ jerry_companion（Jerry陪伴，但随时可能意外触摸）
    │
    └─→ ignore_jerry（完全忽略）
          └─→ 安全
```

---

## 关键节点详细设计

### 开场节点（level0_start）

```yaml
节点ID: level0_start
类型: 场景节点

背景图: level0_start.jpg
  - 第一人称视角
  - 黄色走廊无尽延伸
  - 荧光灯闪烁

文本内容: |
  你睁开眼睛。
  
  这里...不对劲。
  
  刚才你还在办公楼的楼梯间，感到一阵恍惚。然后脚下一空——不是跌倒，而是一种"穿过"的感觉。视野闪烁了一下...
  
  现在你站在一条走廊中。黄色的墙纸，湿漉漉的地毯，头顶的荧光灯发出刺耳的嗡鸣声。
  
  这是哪里？怎么回事？
  
  【欢迎来到后室】
  
  你检查了一下背包：
  - 杏仁水×3瓶
  - 物资包×5份
  - 手电筒（100%电量）
  
  现在该怎么办？

选项:
  1. 查看状态
     → level0_check_status
     
  2. 前方探索
     → level0_corridor_01
     
  3. 尝试返回（不可能）
     → level0_cant_go_back

脚本:
  onEnter:
    - 初始化变量
    - sanity = 100
    - health = 100
    - stamina = 100
    - almond_water = 3
    - supplies = 5
```

---

### 首次遭遇节点（encounter_smiler_tutorial）

```yaml
节点ID: encounter_smiler_tutorial
类型: 遭遇节点（教学）

背景图: smiler_tutorial.jpg
  - 黑暗的转角
  - 发光的笑容（不太近）

文本内容: |
  你转过转角，突然停下了脚步。
  
  黑暗中，有什么东西在发光。
  
  一个...笑容？
  
  数十颗尖锐的牙齿组成的笑容，散发着幽绿色的光。笑容上方，两只椭圆形的眼睛也在发光。
  
  它盯着你。
  
  你的心跳加速。理智值下降...
  
  【提示】这是Smiler，后室中常见的实体。它不会立即攻击，但会吸食你的恐惧。手电筒可以驱散它。

选项:
  1. 打开手电筒 ✅ 推荐
     → smiler_flee
     效果: Smiler消失，电量-10%
     
  2. 快速通过
     → smiler_gamble
     效果: 50%成功，理智-10或-20
     
  3. 站在原地（测试选项）
     → smiler_attack
     效果: 理智-20，可能昏迷

脚本:
  onEnter:
    - sanity -= 20
    - 标记: tutorial_smiler_encountered = true
```

---

### Level 4发现节点（level4_first_arrival）

```yaml
节点ID: level4_first_arrival
类型: 场景节点（剧情重点）

背景图: level4_first_arrival.jpg
  - 明亮整洁的办公室
  - 白色墙壁，灰色地毯
  - 安全感

文本内容: |
  你推开标有"Office"的门。
  
  眼前的景象让你屏住了呼吸。
  
  干净的白色墙壁。整洁的灰色地毯。明亮稳定的荧光灯——不再闪烁，不再发出尖锐的嗡鸣。标准的办公隔间无限延伸，就像一个正常的办公楼。
  
  空气清新。没有霉味，没有潮湿。你能听到轻微的空调送风声。
  
  最重要的是——你感到**安全**。
  
  那种压在胸口的压迫感消失了。理智值开始恢复...
  
  【Level 4: Abandoned Office】
  【安全等级: Safe】
  【你找到了避难所】
  
  远处有个标志："Break Room →"

选项:
  1. 前往茶水间
     → level4_breakroom
     
  2. 探索办公区
     → level4_main_office
     
  3. 坐下休息片刻
     → level4_rest_moment

脚本:
  onEnter:
    - current_level = 4
    - sanity += 10（立即恢复）
    - 标记: discovered_level4 = true
    - 成就解锁: "避难所"
```

---

### 杏仁水无限补给节点（level4_water_dispenser）

```yaml
节点ID: level4_water_dispenser
类型: 补给节点（核心机制）

背景图: level4_water_dispenser.jpg
  - 茶水间
  - 饮水机特写
  - 杏仁水流出

文本内容: |
  你走到饮水机前。
  
  按下蓝色按钮，淡蓝色的液体流入杯中。那熟悉的杏仁香气飘来。
  
  杏仁水。
  
  你试了几次——饮水机似乎永远不会耗尽。无论你取多少，它都会继续流出。
  
  这是奇迹。在这个充满恐怖和未知的地方，这里有无限的杏仁水。
  
  你可以在这里补满所有瓶子。你可以想喝多少就喝多少。
  
  第一次，你不再担心理智值。
  
  【当前杏仁水: {almond_water}瓶】
  【最大携带: 99瓶】

选项:
  1. 收集杏仁水（+5瓶）
     → level4_water_dispenser（循环）
     条件: almond_water < 95
     
  2. 立即饮用一瓶（理智+20）
     → level4_water_dispenser
     条件: almond_water > 0
     
  3. 装满所有瓶子（直接到99瓶）
     → level4_water_full
     
  4. 离开茶水间
     → level4_breakroom

脚本:
  选项1: almond_water += 5
  选项2: sanity += 20, health += 5, almond_water -= 1
  选项3: almond_water = 99
```

---

### Level Fun入口节点（level_fun_entrance）

```yaml
节点ID: level_fun_entrance
类型: 决策节点（陷阱警告）

背景图: level_fun_entrance.jpg
  - 彩色气球装饰的门
  - "=)"符号
  - 虚假的欢快

文本内容: |
  你在Level 1的走廊中前进，突然看到一扇门。
  
  这扇门...不一样。
  
  门上贴满了彩色气球贴纸、彩带和笑脸。墙上用彩色笔写着：
  
  "COME PARTY WITH US! =)"
  
  你能听到门后传来音乐——欢快的电子生日快乐歌。还有笑声，很多笑声。
  
  这看起来...友善？像个派对？
  
  但你的每一个本能都在尖叫：
  
  **不要进去。**
  **不要相信"=)"。**
  **这是陷阱。**
  
  你在Level 4的墙上看到过涂鸦警告："千万不要进入Level Fun。"
  
  【⚠️ 危险决策点】

选项:
  1. 推开门进入 ⚠️ 极度危险
     → level_fun_interior
     后果: 必定遭遇Partygoer，几乎必死
     
  2. 立即离开 ✅ 明智选择
     → level1_corridor_safe
     效果: 避开陷阱，理智+5（明智决策）
     
  3. 靠近但不进入（调查）
     → level_fun_investigation
     效果: 获得情报，但理智-10

脚本:
  onEnter:
    - 标记: encountered_level_fun_entrance = true
    - 如果理智<30: 隐藏选项2（幻觉影响判断）
```

---

## 剧情节奏设计

### 情感曲线

```
恐惧/紧张程度
    ↑
100%│                            ╱╲ Level Fun
    │                          ╱    ╲
 80%│            ╱╲ Level 5  ╱        ╲
    │          ╱    ╲      ╱            
 60%│   ╱╲  ╱        ╲  ╱              
    │ ╱    ╲          ╲╱                
 40%│       ╲                           ╱╲结局选择
    │        ╲    Level 4（安全）    ╱    
 20%│         ╲    ___________      ╱      
    │          ╲ ╱             ╲  ╱        
  0%└────────────────────────────────────→时间
      0'   20'   40'   60'  80'  100' 120'

关键时刻:
  - 0-20': Level 0，持续紧张
  - 20-30': Level 1，略微缓解
  - 30-40': 发现Level 4，安全感
  - 40-60': 探索循环，张弛有度
  - 60-70': Level 5挑战，高潮
  - 70-80': 返回安全区，恢复
  - 80-100': 追求结局，最终冲刺
```

---

### 节奏控制技巧

#### 紧张时刻
- Level 0的持续压抑
- 实体遭遇的突然爆发
- Level 5的The Beast追逐
- Level Fun的绝望陷阱

#### 放松时刻
- Level 4的安全区
- 杏仁水补给的满足感
- 遇到Blub Cat的温暖
- 睡眠恢复的平静

#### 节奏交替
```
紧张 → 紧张 → 放松 → 紧张 → 紧张 → 紧张 → 放松 → ...

避免:
  - 连续3次以上紧张（过于压抑）
  - 连续2次以上放松（失去张力）
```

---

## 结局设计

### 结局A: 逃离（Perfect Ending）

**触发条件**:
- Noclip等级≥9
- 理智≥60
- 探索至少8个不同Level
- Day≥15

**结局节点**:
```yaml
ending_escape:
  content: |
    你站在一扇普通的门前。
    
    但你知道——这扇门不一样。
    
    你花了{days}天，探索了无数层级，遭遇了无数恐怖。你学会了Noclip，学会了生存，学会了在孤独中保持理智。
    
    现在，你的Noclip已经达到最高境界。你能感知到——这扇门后面，是Frontrooms。
    
    你推开门。
    
    视野闪烁。
    
    阳光刺眼。汽车的喇叭声。人群的喧哗。正常世界的一切混乱、美好的噪音。
    
    你回来了。
    
    【结局A: 逃离】
    【你成功回到了Frontrooms】
    
    但当你回头，那扇门已经消失了。
    
    后室的记忆会永远伴随着你。
    
    =====游戏结束=====
```

---

### 结局B: 定居Level 11（Good Ending）

**触发条件**:
- 到达Level 11
- 在Level 11停留≥3天
- 理智≥40
- 选择放弃寻找出口

**结局节点**:
```yaml
ending_settle_level11:
  content: |
    你站在Level 11的街道上，看着霓虹灯闪烁的城市景观。
    
    是的，这里是后室。是的，你可能永远无法回到Frontrooms。
    
    但这里...也没那么糟。
    
    Level 11有无尽的城市，有商店（虽然空无一人），有住宅。你找到了一间公寓，布置了自己的"家"。
    
    你遇到了其他幸存者。你们建立了一个小社区。每天一起探索，分享物资，讲述各自的故事。
    
    你还收养了一只Blub Cat。它每天都会在你腿边滚来滚去。
    
    也许你不会再尝试逃离了。也许这就是你的新生活。
    
    【结局B: 定居】
    【你在Level 11找到了新的归属】
    
    后室不再是监狱，而是...另一个家。
    
    =====游戏结束=====
```

---

### 结局C: 精神崩溃（Bad Ending）

**触发条件**:
- 理智降至0

**结局节点**:
```yaml
ending_insanity:
  content: |
    墙纸在蠕动。
    
    不，是地毯。
    
    不，是天花板。
    
    一切都在动。笑容无处不在。它们在笑你，嘲笑你，盯着你。
    
    你听到妈妈在叫你的名字。你追过去。但那不是妈妈。那从来不是妈妈。
    
    你不记得自己叫什么了。你不记得你从哪里来。你不记得为什么要逃离。
    
    黄色走廊无尽延伸。你继续走。永远走。
    
    【结局C: 精神崩溃】
    【你失去了自我，成为后室的一部分】
    
    在后室的某个角落，一个空壳继续游荡着。
    
    那曾经是你。
    
    =====Game Over=====
```

---

### 结局D: 转化（Worst Ending）

**触发条件**:
- 被Partygoer感染
- 72小时内未治愈

**结局节点**:
```yaml
ending_partygoer:
  content: |
    你的皮肤完全变成了黄色。
    
    你的手臂已经不像手臂了——细长、柔软，末端是环形的齿口。
    
    你的脸固定成了永恒的笑容。
    
    但最可怕的是——你不再感到恐惧。
    
    你感到...快乐？
    
    派对很好玩。真的很好玩。为什么你之前要逃离呢？
    
    你回到了Level Fun。其他Partygoer欢迎你。你们一起唱歌，一起跳舞。
    
    你看到一个新来的人类，惊恐地看着你们。
    
    你向他招手：
    
    "来参加派对吧！很好玩的！=)"
    
    【结局D: 转化】
    【你成为了Partygoer】
    
    =====Game Over=====
```

---

## 节点创作清单

### MVP阶段（Phase 1）

**Level 0**（15个节点）:
- [x] level0_start（开场）
- [ ] level0_corridor_01-05（走廊×5）
- [ ] level0_room_01-02（小房间×2）
- [ ] encounter_smiler_tutorial（Smiler教学）
- [ ] encounter_bonethief_01（Bone Thief遭遇）
- [ ] level0_search_supplies（搜索）
- [ ] level0_drop_maze（Drop Maze）
- [ ] noclip_tutorial（Noclip教学）
- [ ] noclip_to_level1（出口）

**Level 1**（20个节点）:
- [ ] level1_entrance
- [ ] level1_main_warehouse
- [ ] level1_storage_area（储物区）
- [ ] level1_tool_zone（工具区）
- [ ] level1_fog_area（雾气区，杏仁水）
- [ ] encounter_hound_01-02（Hound×2）
- [ ] encounter_blub_cat（Blub Cat）
- [ ] level1_blackout（停电）
- [ ] level1_rest_area
- [ ] noclip_to_level4
- [ ] ...（其他10个）

**Level 4**（12个节点）:
- [x] level4_first_arrival
- [x] level4_water_dispenser
- [ ] level4_main_office
- [ ] level4_rest_zone
- [ ] level4_storage
- [ ] level4_exits
- [ ] ...（其他6个）

**结局节点**（5个）:
- [x] ending_escape
- [x] ending_settle_level11
- [x] ending_insanity
- [ ] ending_death_generic
- [ ] ending_partygoer

**总计**: 约52个节点（MVP）

---

### Phase 2扩展

**新增Level**:
- Level 2（15个节点）
- Level 5（18个节点）
- Level 11（25个节点）
- Level Fun（8个节点）

**新增遭遇**:
- Burster、Deathmoth、The Beast等

**支线剧情**:
- 幸存者日记（5个节点）
- Jerry支线（3个节点）
- Blub Cat陪伴（8个节点）

**总计**: 约130个节点（完整版）

---

## 节点制作流程

### 步骤1: 策划节点
1. 确定节点类型（场景/遭遇/补给/转场/决策）
2. 编写节点文本（500-800字）
3. 设计选项分支（2-5个）
4. 设计Blockly脚本逻辑

### 步骤2: 美术资源
1. 绘制/生成背景图（1920×1080）
2. 标注热区位置
3. 准备UI元素

### 步骤3: 技术实现
1. 在编辑器中创建StoryNode
2. 配置背景图和热区
3. 编写Blockly脚本
4. 测试节点跳转

### 步骤4: 测试迭代
1. 玩测试流程
2. 调整文本和数值
3. 修复Bug
4. 平衡性调整

---

## 总结：节点驱动的Backrooms

### 核心理念
- **节点 = 体验单元** - 每个节点都是完整的小故事
- **网络 = 探索自由** - 玩家可以自由选择路径
- **脚本 = 动态反馈** - Blockly实现复杂逻辑
- **剧情 = 情感旅程** - 从恐惧到希望到抉择

### 设计原则
1. **每个节点都有目的** - 推进剧情或提供资源或营造氛围
2. **选项要有意义** - 每个选择都有后果
3. **节奏张弛有度** - 紧张与放松交替
4. **文本质量优先** - 沉浸感来自文字

---

**下一章**: [04-UI-UX设计](./04-UI-UX设计.md) - 界面与交互设计

---

**最后更新**: 2025-10-29  
**文档状态**: ✅ 完成  
**版本**: v1.0

