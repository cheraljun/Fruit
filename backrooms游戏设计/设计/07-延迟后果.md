# 延迟后果

## 设计理念

**现在的选择，10个节点后才显现后果**

制造悬念，增加重玩价值（"原来那个选择影响了这里！"）

---

## mo编辑器实现

**用变量记录选择，后续节点用Blockly判断**：

```javascript
// 节点A：做选择
vars['gave_almond_water'] = true

// 节点B-J：中间10个节点（无提示）

// 节点K：后果显现
if (vars['gave_almond_water']) {
  // 跳转到感激节点
} else {
  // 跳转到负罪节点
}
```

---

## 案例1：帮助幸存者的后果

### 节点A（选择）- Level1_SurvivorEncounter

```markdown
你遇到一个虚弱的幸存者。

【选择】
→ 给他1瓶杏仁水
→ 不给
```

### 节点B-K（中间探索）

玩家继续游戏，探索Level 2、Level 3、到达Level 4...
**完全没有提示**之前的选择会有后果。

### 节点L（后果）- Level4_SurvivorReturn

**如果gave_almond_water=true**:
```markdown
你在Level 4休息时，门开了。

是那个幸存者！

"是你！你的杏仁水救了我的命。"

他递给你2瓶杏仁水和1份物资包。

"我不知道怎么报答你，这是我找到的。"

【获得】杏仁水×2，物资×1
【情感】你感到温暖（理智+10）
```

**如果refused_help=true**:
```markdown
你在Level 0的墙角看到一具遗骸。

背包里是空的杏仁水瓶。

遗骸旁的墙上刻着：
"第7天。没人帮我。"

你想起那个幸存者。

【情感】你感到负罪（理智-15）
```

**为什么有效**:
- 玩家不知道10个节点后会有后果
- 见到幸存者回来时的惊喜
- 或者发现遗骸时的负罪感
- 第二次玩会特意关注这个选择

---

## 案例2：Level Fun的诱惑

### 节点A - Level1_FunWarning

```markdown
墙上写着：

> "不要进入Level Fun！
> 彩色气球=死亡！"

【选择】
→ 记住这个警告
→ 无视（"我才不信"）
```

### 节点B-E（继续探索）

玩家探索其他层级，暂时忘记这个警告。

### 节点F - Level2_FunEntrance

**如果remembered_warning=true**:
```markdown
前方有一扇彩色的门。气球飘出。

你想起Level 1墙上的警告："彩色气球=死亡"。

你立即后退。

【自动跳过陷阱】
```

**如果ignored_warning=true**:
```markdown
前方有一扇彩色的门。气球飘出。

看起来...很有趣？

【没有警觉】
【选择】
→ 进入（危险！）
→ 离开
```

**为什么有效**:
- 第一次玩可能无视警告 → 后来后悔
- 第二次玩记住警告 → 成功避开陷阱
- 知识延迟应用，制造学习曲线

---

## 案例3：物资选择的蝴蝶效应

### 节点A - Level1_ResourceChoice

```markdown
你在仓库找到一个箱子。里面有：
- 3瓶杏仁水
- 1根绳索

你的背包只能再装3件物品。

【选择】
→ 拿走全部杏仁水（3瓶）
→ 拿走2瓶杏仁水+1根绳索
```

### 节点B-H（中间探索）

玩家消耗杏仁水，探索各层级。

### 节点I - Level2_DropMaze

**如果has_rope=true**:
```markdown
前方是Drop Maze。

你有绳索！

【选项】
→ 使用绳索安全通过（100%成功）
→ 尝试跳跃（省绳索但危险）
```

**如果has_rope=false**:
```markdown
前方是Drop Maze。

你没有绳索。

【选项】
→ 跳跃（需体力检定，可能坠亡）
→ 寻找其他路径（绕远路）
```

**为什么有效**:
- 玩家在节点A做选择时，不知道后面有Drop Maze
- 如果选了绳索 → "还好当时拿了绳索！"
- 如果只拿杏仁水 → "早知道拿绳索..."
- 制造资源管理的深度

---

## 案例4：道德选择的连锁反应

### 节点A - Level4_SupplyClaim

```markdown
Level 4的储藏室里有一堆物资。

墙上贴着纸条：
"这是公共物资。
请每人只拿2份。
让后来者也有生存机会。"

储藏室里有5份物资。

【选择】
→ 只拿2份（遵守规则）
→ 全部拿走（自私）
```

### 节点B-K（中间）

玩家继续游戏。

### 节点L - Level11_Community

**如果took_all=true**:
```markdown
你到达Level 11，发现其他幸存者聚集地。

一个幸存者看到你："是你！你是那个拿走Level 4所有物资的人！"

"因为你，后来的两个人死在Level 0了。"

社区成员用敌视的眼光看着你。

【后果】
- 无法加入社区
- 只能独自定居
```

**如果took_two=true**:
```markdown
你到达Level 11社区。

"新人！欢迎！"

"你遵守了Level 4的规则，我们信任你。"

【后果】
- 加入社区
- 获得帮助和资源
- 解锁"社区定居"结局
```

**为什么有效**:
- 道德选择的后果是社会性的
- 不是"数值惩罚"，而是"失去信任"
- 符合Backrooms中人类的生存逻辑

---

## 设计原则

### 后果延迟的时间

| 延迟长度 | 用途 | 例子 |
|---------|------|------|
| 3-5节点 | 短期因果 | 逃跑消耗体力→下个遭遇无法逃跑 |
| 10-15节点 | 中期悬念 | 帮助幸存者→他后来回报 |
| 20+节点 | 长期影响 | 早期选择影响结局 |

### 变量命名

```javascript
// 明确记录选择
vars['gave_almond_water_to_survivor'] = true
vars['remembered_fun_warning'] = true
vars['took_all_supplies'] = true

// 后续节点判断
if (vars['gave_almond_water_to_survivor']) {
  // 感激路线
}
```

### 避免过度隐藏

✓ **重要选择应该感觉重要** - 文本强调"这个决定很重要"  
✗ **不要完全隐藏** - 玩家应该隐约感觉"这可能有后果"  
✓ **多次游玩发现** - 第一次玩不知道，第二次玩恍然大悟

---

## 与结局系统结合

多个延迟后果累积，最终影响结局判定：

```javascript
// 结局判定（Level11_EndingCheck）
let karma_score = 0

if (vars['helped_survivor']) karma_score += 1
if (vars['left_memorial']) karma_score += 1
if (vars['followed_rules']) karma_score += 1
if (vars['warned_others']) karma_score += 1

if (karma_score >= 3) {
  // 解锁"守护者"结局
} else if (karma_score <= 1) {
  // "孤独者"结局
}
```

每个小选择都计入"道德分数"，最终决定结局类型。

