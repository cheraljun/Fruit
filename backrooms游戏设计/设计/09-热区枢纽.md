# 热区枢纽

## 设计理念

**用一张图片+热区实现空间探索，Level 4是最佳枢纽场景**

玩家点击图片上的不同区域，跳转到对应节点，模拟"在空间中移动"。

---

## mo编辑器的热区系统

### 核心功能

- **HotspotEditor**: 在图片上拖拽绘制矩形热区
- **jumpToNode**: 点击热区直接跳转到目标节点
- **世界地图**: 自动记录访问过的热区场景

---

## Level 4枢纽设计

### 背景图需求

**一张Level 4社区中心的俯视图或横截面图**，标出：
- 茶水间（左上）
- 休息区（中央）
- 阅览室（右上）
- 北侧出口（左下）
- 探索区（右下）

### 热区配置

```yaml
节点ID: Level4_Hub
显示模式: visual-novel
背景图: level4_layout.jpg
场景名称: Level 4 - 社区中心

热区1:
  标签: "茶水间 💧"
  位置: [50, 50, 200, 150]
  目标节点: Level4_AlmondWater

热区2:
  标签: "休息区 🛋️"
  位置: [250, 100, 450, 300]
  目标节点: Level4_Rest

热区3:
  标签: "阅览室 📚"
  位置: [500, 50, 700, 150]
  目标节点: Level4_Library

热区4:
  标签: "前往Level 1 🚪"
  位置: [50, 350, 200, 450]
  目标节点: Level1_FromLevel4

热区5:
  标签: "探索未知区域 ❓"
  位置: [500, 350, 700, 450]
  目标节点: Level4_SecretRoom
  条件: level4_visit_count >= 3
```

---

## 节点网络结构

```
Level4_Hub（热区枢纽）
  ├─ Level4_AlmondWater（茶水间）
  │   └─ 文本节点，补充杏仁水，返回Hub
  ├─ Level4_Rest（休息区）
  │   └─ 文本节点，恢复理智，返回Hub
  ├─ Level4_Library（阅览室）
  │   └─ 文本节点，查看留言，返回Hub
  ├─ Level1_FromLevel4（出口）
  │   └─ 传统选项节点，进入Level 1
  └─ Level4_SecretRoom（隐藏）
      └─ 条件解锁，发现额外物资
```

---

## 具体节点内容

### Level4_AlmondWater（茶水间）

```markdown
你走进茶水间。

饮水机安静地运转。按下按钮，淡蓝色的杏仁水流出。

【操作】
你装满了所有空瓶。

【变量设置】
almond_water_state = 'sufficient'
almond_water_count = 10

【文本】
背包沉甸甸的。这是安全感。

【选项】
→ 返回社区中心（jumpToNode: Level4_Hub）
```

### Level4_Rest（休息区）

```markdown
你躺在沙发上。

柔软。舒适。安全。

你闭上眼睛，第一次在后室中真正放松。

【变量设置】
sanity_state = 'stable'
rested_at_level4 = true

【文本】
（休息了2小时）

你醒来，感觉好多了。

【选项】
→ 返回社区中心
```

### Level4_Library（阅览室）

```markdown
阅览室的墙上贴满了留言。

【环境叙事】
> "Day 12 - Level 4是避难所。杏仁水无限。-- 李华"
> "寻找Alex，他去Level 11了。-- Sarah"
> "不要去Level Fun！= 死亡！-- 紧急警告"

【选项】
→ 写下自己的留言
→ 返回社区中心
```

---

## 为什么这样设计

### ✓ 空间感

玩家"看到"Level 4的布局，点击不同区域，模拟"在空间中移动"。

### ✓ 记忆锚点

"杏仁水在茶水间"成为玩家的空间记忆，就像记住真实建筑的布局。

### ✓ 枢纽循环

```
1. 玩家进入Level4_Hub（热区枢纽）
2. 点击"茶水间" → Level4_AlmondWater
3. 补充物资 → 返回Level4_Hub
4. 点击"前往Level 1" → Level1_FromLevel4
5. 探索Level 1 → 消耗资源 → 返回Level 4
6. 重复
```

### ✓ 世界地图整合

访问Level4_Hub后，世界地图显示"Level 4 - 社区中心"，可随时快速返回。

---

## 扩展设计

### 条件热区显示

**Level 4的隐藏房间**:

```javascript
// Level4_Hub节点的Blockly脚本
if (vars['level4_visit_count'] >= 3) {
  // 动态添加热区："你注意到墙角有扇不起眼的门"
  // 热区5: "隐藏房间" → Level4_SecretRoom
}
```

**玩家体验**:
- 第1-2次访问：看不到这个热区
- 第3次访问：突然出现新热区
- 点击进入：发现隐藏储藏室

### 多个枢纽场景

**Level 11城市枢纽**:

```yaml
节点ID: Level11_CityHub
背景图: level11_city.jpg
场景名称: Level 11 - 无尽之城

热区:
  - "公寓楼" → Level11_Apartment
  - "商店" → Level11_Shop
  - "霓虹街道" → Level11_Street
  - "地铁入口" → Level11_Metro
```

---

## 实现建议

### 背景图风格

- **Level 4**: 明亮、整洁、温馨（Liminal Space风格）
- **Level 11**: 霓虹灯、都市夜景、赛博朋克感

### 热区标签文案

✓ **简洁+emoji**: "茶水间 💧"  
✓ **功能清晰**: "前往Level 1 🚪"  
✓ **暗示内容**: "探索未知区域 ❓"

❌ **不要太长**: "走向茶水间去补充杏仁水"（太啰嗦）  
❌ **不要技术术语**: "Node_Level4_Almond"（破坏沉浸）

### 返回枢纽设计

每个子节点最后都有"返回"选项，用jumpToNode回到枢纽。

```markdown
【选项】
→ 返回社区中心（jumpToNode: Level4_Hub）
```

不用edge连线，保持节点流整洁。

---

## 与传统节点流结合

### 混合设计

- **枢纽用热区** - Level 4, Level 11的空间探索
- **叙事用选项** - 遭遇实体、剧情选择仍用传统选项节点

```
Level4_Hub（热区）→ 点击"前往Level 1"
  ↓
Level1_FromLevel4（传统选项节点）
  文本: "你推开门，回到Level 1的仓库..."
  选项:
    → 搜索货架
    → 寻找杏仁水
    → 返回Level 4
```

**为什么混合**:
- 热区适合"空间导航"
- 选项适合"剧情选择"
- 各取所长

