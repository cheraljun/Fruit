# 隐藏区域

## 设计理念

**用条件判断解锁隐藏热区，奖励探索和重玩**

第一次访问看不到，满足条件后才显示新热区。

---

## mo编辑器实现

### Blockly条件控制

在热区枢纽节点的Blockly脚本中：

```javascript
if (vars['level4_visit_count'] >= 3) {
  // 显示隐藏热区
  // （实际实现：预设热区，用条件控制是否显示标签）
}
```

---

## 案例：Level 4隐藏储藏室

### Level4_Hub的两个版本

**首次访问（visit_count < 3）**:
```markdown
Level 4 - 社区中心

一个整洁的社区活动室。

【可见热区】
- 茶水间 💧
- 休息区 🛋️
- 阅览室 📚
- 前往Level 1 🚪
```

**第3次访问后（visit_count >= 3）**:
```markdown
Level 4 - 社区中心

你已经很熟悉这里了。

等等...墙角那扇门以前就在吗？

【新增热区】
- 墙角的门 ❓ → Level4_SecretRoom
```

---

## Level4_SecretRoom内容

```markdown
你推开那扇不起眼的门。

储藏室！

里面堆满了物资：
- 杏仁水×10
- 物资包×5
- 绳索×2

墙上贴着便签：
"紧急储备。
如果你能发现这里，说明你已经是老手了。
随意使用。
-- Level 4管理员（？）"

【获得】
- 杏仁水×10
- 物资包×5
- 绳索×2

【变量设置】
found_secret_room = true

【选项】
→ 返回社区中心
```

---

## 为什么这样设计

### ✓ 奖励熟悉度

玩家多次访问Level 4，视觉上"习惯"了场景，突然发现新内容 = 惊喜。

### ✓ 奖励探索欲

好奇的玩家会想"Level 4还有什么秘密"。

### ✓ 不惩罚新人

第一次玩错过隐藏房间不会卡关，只是少了额外奖励。

### ✓ 重玩价值

"上次我没发现隐藏房间，这次要找到！"

---

## 其他隐藏区域案例

### Level 1的秘密阁楼

**条件**: 搜索货架区超过5次

```markdown
你在搜索时，注意到天花板有个活动梯子。

以前怎么没发现？

【新热区】
- 爬上梯子 → Level1_Attic
```

**Level1_Attic**:
```markdown
阁楼。

灰尘、旧箱子、蛛网。

但在角落，你发现：
- 杏仁水×5（旧库存）
- 一本日记（Level 1管理员的记录）

日记最后一页：
"第180天。
我已经在Level 1生活了半年。
这里不完美，但可以生存。
如果有人读到这个...
别放弃。"

【情感影响】
你感到...不那么孤独。

理智+15
```

---

## 条件设计策略

### 访问次数条件

```javascript
vars['level4_visit_count'] >= 3
vars['level1_search_count'] >= 5
```

**适用**: 奖励熟悉场景的玩家

### 剧情条件

```javascript
vars['helped_survivor'] && vars['found_level4']
```

**适用**: 完成特定剧情线

### 知识条件

```javascript
vars['knows_secret_password']  // 从日记中得知
```

**适用**: 阅读环境叙事的玩家

### 时间条件

```javascript
vars['days_survived'] >= 10
```

**适用**: 长期生存奖励

---

## 与环境叙事结合

### 提示隐藏内容

**Level 4阅览室的留言**:

```markdown
白板上有人写着：

> "Level 4有个秘密。
> 多来几次，你会发现。
> -- 老手提示"

（玩家第一次看到会好奇，第三次访问时突然理解）
```

### 不要太隐晦

✓ **好的提示**: "多来几次"（明确条件）  
✗ **坏的提示**: "秘密在角落"（太模糊）

---

## 隐藏结局路径

### Level 11的隐藏电梯

**条件**: 探索Level 11超过3天 + 找到线索

```markdown
Level 11 - 无尽之城

霓虹灯闪烁的街道上，你注意到一栋从未见过的建筑。

电梯门上写着："Level ∞"

【选项】
→ 进入电梯（通往隐藏结局？）
→ 离开（太危险了）
```

**如果进入** → 触发"真相"隐藏结局路线。

---

## 实现建议

### 热区数据结构

```yaml
节点ID: Level4_Hub

# 基础热区（始终显示）
基础热区:
  - 茶水间
  - 休息区
  - 阅览室

# 条件热区（满足条件才显示）
条件热区:
  - 标签: "隐藏房间"
    目标: Level4_SecretRoom
    条件变量: level4_visit_count >= 3
```

### Blockly判断

在Level4_Hub节点的前置脚本：

```javascript
// 访问计数
vars['level4_visit_count'] = (vars['level4_visit_count'] || 0) + 1

// 判断是否显示隐藏热区
if (vars['level4_visit_count'] >= 3) {
  vars['show_secret_room'] = true
}
```

### 文本提示

当满足条件时，在节点文本中提示：

```markdown
【如果show_secret_room=true】
你已经很熟悉Level 4了。

突然，你注意到墙角有扇之前没看到的门...
```

---

## 玩家反馈设计

### 发现隐藏内容的成就感

```markdown
【发现隐藏储藏室后】

系统文本：
"你发现了隐藏区域！"

（不要UI弹窗，用文本暗示）

"看来你已经是Level 4的老住户了。"
```

### 分享欲望

玩家发现隐藏内容后，会想告诉其他玩家：
"你知道Level 4有隐藏房间吗？"

这增加游戏的社交传播。

