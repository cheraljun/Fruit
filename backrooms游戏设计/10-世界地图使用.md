# 世界地图使用

## 设计理念

**已访问的热区场景自动加入世界地图，玩家可快速返回**

世界地图是mo编辑器热区系统的配套功能，用于快速导航。

---

## mo编辑器的世界地图

### 自动机制

- 玩家访问过任何**有热区+场景名称**的节点
- 该节点自动加入"世界地图"
- 左上角显示"世界地图"按钮
- 点击展开列表，可以jumpToNode直接跳转

---

## 在Backrooms游戏中的应用

### 已访问场景列表

```
玩家到Day 7时，世界地图可能显示：

📍 世界地图
  ├─ Level 4 - 社区中心
  ├─ Level 1 - 仓库
  ├─ Level 11 - 无尽之城
  └─ Level 5 - 恐怖酒店（已标记为危险）
```

---

## 场景命名策略

### 节点设置

每个枢纽节点必须设置：
- **场景名称**: 在世界地图中显示的名字
- **背景图**: 热区场景的图片
- **至少1个热区**: 触发世界地图记录

```yaml
节点ID: Level4_Hub
场景名称: "Level 4 - 社区中心"
背景图: level4.jpg
热区: [...至少一个]

→ 访问后，世界地图显示"Level 4 - 社区中心"
```

### 命名规范

```
格式: "Level X - 场景描述"

例子:
✓ "Level 0 - 黄色走廊"
✓ "Level 1 - 仓库"
✓ "Level 4 - 社区中心"
✓ "Level 5 - 恐怖酒店"
✓ "Level 11 - 无尽之城"
✓ "Level Fun - 派对陷阱"
```

---

## 玩家体验流程

### 第一次发现Level 4

```
玩家通过Level 1的出口进入Level 4
  ↓
Level4_Hub节点（有热区+场景名称）
  ↓
【系统提示】"Level 4 - 社区中心"已加入世界地图
  ↓
左上角显示"世界地图"按钮
```

### 在Level 5探索时快速返回

```
玩家在Level 5遭遇The Beast
  ↓
理智暴跌，需要立即逃离
  ↓
点击"世界地图"按钮
  ↓
选择"Level 4 - 社区中心"
  ↓
直接跳转到Level4_Hub
  ↓
快速进入茶水间补充杏仁水
```

---

## 设计意图

### 解决Backrooms的"迷路问题"

**原始Backrooms**:
- 容易迷路
- 难以返回安全区
- 玩家焦虑感极高

**加入世界地图后**:
- 知道Level 4的位置（"家"的坐标）
- 可以快速返回补给
- 降低迷路焦虑，聚焦探索乐趣

### 不破坏氛围

✓ **保留探索感** - 第一次必须"发现"场景才加入地图  
✓ **保留距离感** - 不是"传送"，是"记住路径"  
✓ **保留危险感** - 快速返回不意味着无敌，Level 5依然危险

---

## 与游戏进度结合

### 早期（Day 1-3）

```
世界地图:
  └─ Level 4 - 社区中心（唯一安全点）
```

玩家只有一个安全区，返回频率高。

### 中期（Day 7-15）

```
世界地图:
  ├─ Level 4 - 社区中心（主基地）
  ├─ Level 1 - 仓库（中转站）
  ├─ Level 5 - 恐怖酒店（危险，但有物资）
  └─ Level 11 - 无尽之城（探索中）
```

玩家有多个选择，可以规划路线。

### 后期（Day 30+）

```
世界地图:
  ├─ Level 4 - 社区中心（旧基地）
  ├─ Level 11 - 无尽之城（新基地）
  ├─ Level 1/2/5（已探索）
  └─ Level Fun - 派对陷阱（标记为禁区）
```

Level 11成为主基地，Level 4变成中转站。

---

## 特殊场景处理

### Level Fun不应该在世界地图

**原因**: 那是陷阱，不应该"方便返回"。

**实现**:
- Level Fun的节点**不设置热区**
- 或者设置热区但**不设置场景名称**
- 这样就不会被加入世界地图

### 一次性场景

某些场景只访问一次，不需要返回：

```yaml
节点ID: Level0_FirstEncounter
场景名称: ""  # 留空，不加入世界地图
背景图: level0_encounter.jpg
热区: []  # 无热区，不加入地图
```

**例子**:
- Level 0的某个遭遇场景（剧情一次性）
- Drop Maze场景（通过就不用回去）

### 隐藏场景

```yaml
节点ID: Level4_SecretRoom
场景名称: "Level 4 - 隐藏储藏室"
背景图: level4_secret.jpg
热区: [...]

→ 发现后加入世界地图
→ 显示为"Level 4 - 隐藏储藏室"
→ 可以快速返回拿物资
```

---

## 与叙事结合

### 世界地图作为成就系统

```
玩家查看世界地图时:

📍 世界地图（已探索 5/12 个层级）
  ├─ Level 0 - 黄色走廊
  ├─ Level 1 - 仓库
  ├─ Level 4 - 社区中心
  ├─ Level 5 - 恐怖酒店
  └─ Level 11 - 无尽之城

（还有7个未探索层级等待发现...）
```

**作用**:
- 可视化进度（"我探索了5个层级"）
- 鼓励探索（"还有7个没去过"）
- 重玩价值（"上次没去Level 6，这次去看看"）

### 世界地图的叙事功能

**Level 4白板上的"地图"留言**:

```markdown
Level4_Library（阅览室）

白板上有人画了一张手绘地图：

[粗略的草图]
Level 0 → Level 1 → Level 4（你在这里）
        ↓
     Level 2 → Level 5（危险！）
        ↓
     Level 11（定居点）

下方写着：
"这是我探索过的路径。
Level 4是家。
Level 11是希望。
-- Alex, Day 47"

【功能】
这张地图提示了探索顺序，鼓励玩家前往Level 11。
```

---

## 实现检查清单

✓ **主要枢纽设置热区+场景名**:
  - Level 4（必须）
  - Level 1（可选）
  - Level 11（必须）

✓ **危险场景慎重**:
  - Level 5可以加入（方便返回）
  - Level Fun不加入（陷阱）

✓ **一次性场景不加入**:
  - 剧情遭遇节点
  - 过渡场景

✓ **命名清晰统一**:
  - "Level X - 描述"格式
  - 简短、易识别

✓ **与快速返回机制配合**:
  - 每个子节点都有"返回"选项
  - jumpToNode保持流畅

