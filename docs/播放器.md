# 播放器

## 双播放器架构

**在线播放器（frontend/src/pages）**
- PlayerRouter - 根据displayMode路由
- Player.tsx - 终端模式（消息流累积）
- VisualNovelPlayer.tsx - 视觉小说（背景+立绘+对话框+热区+世界地图）

**独立播放器（player-standalone）**
- terminal/和visual-novel/两个子项目独立构建
- vite-plugin-singlefile生成单文件HTML
- 所有CSS/JS内联，图片转base64，零外部依赖
- 双击即可运行，无需HTTP服务器

## 选项展示

**底部选项按钮** - 横向flex布局文本链接，点击调用makeChoice  
**内嵌文本选项** - `[[选项文本]]`语法渲染为超链接

## 图片热区与世界地图

**热区交互** - 有热区+背景图时，全屏显示图片，透明热区可点击跳转  
**世界地图** - 访问过热区场景后，左上角显示已访问场景列表，点击直接跳转

## Blockly初始化

播放器需调用initializeBlockly()设置代码生成器，不显示编辑器UI

## 样式系统

**终端风格** - DarkTerminalStylePlugin、LightCleanStylePlugin  
**视觉小说风格** - Classic、Modern、Pixel  
导出时自动获取激活插件的CSS，注入到单文件HTML
